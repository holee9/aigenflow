# 실제 AI 응답 재현성 평가 - 현황 보고서

**평가 일시**: 2026-02-15 18:10
**평가 방식**: Playwright 웹 브라우저 게이트웨이
**평가 상태**: 진행 중 (기술적 한계 발생)

## 1. 평가 개요

| AI | 상태 | 성공 | 결과 |
|----|------|------|------|
| claude | ⚠️ 기술적 오류 | 0/3 | wait_for_selector 타임아웃 |
| gemini | ⚠️ 기술적 오류 | 0/3 | DOM 요소 분리 오류 |
| perplexity | ⚠️ 응답 없음 | 0/3 | 응답 캡처 실패 |
| chatgpt | ❌ 로그인 필요 | 0/0 | 평가 제외 |

## 2. 기술적 한계 분석

### 발생한 오류

**Claude: wait_for_selector 타임아웃**
```
Error: Page.wait_for_selector: Timeout 15000ms exceeded.
- locator resolved to visible <div contenteditable="true">
```
- 셀렉터는 발견되었으나 페이지가 완전히 로드되지 않음
- 복잡한 SPA(Single Page Application) 렌더링 타이밍 문제

**Gemini: ElementHandle.press 오류**
```
Error: ElementHandle.press: Element is not attached to the DOM
```
- 입력 요소가 fill 후 DOM에서 분리됨
- 동적으로 재생성되는 요소의 수명 주기 문제

**Perplexity: 응답 캡처 실패**
- 응답 메시지가 렌더링되기 전에 캡처 시도
- DOM 구조가 실제와 다름

### 근본 원인

1. **비동기 SPA 렌더링**: 각 AI 서비스는 React/Angular 기반 SPA로, DOM이 비동기적으로 렌더링됨
2. **셀렉터 불안정성**: 각 서비스가 DOM 구조를 자주 변경
3. **페이지 로딩 타이밍**: wait_for_selector만으로는 실제 렌더링 완료를 보장할 수 없음
4. **입력 요소 동적 교체**: 입력 필드가 메시지 전송 후 동적으로 교체됨

## 3. 검증된 사항

### ✅ 세션 유효성 (PoC 확인)

| AI | 세션 상태 | 확인 방법 |
|----|----------|----------|
| claude | ✅ 유효 | 수동 브라우저 열람 확인 |
| gemini | ✅ 유효 | 수동 브라우저 열람 확인 |
| perplexity | ✅ 유효 | 수동 브라우저 열람 확인 |

### ✅ 프레임워크 구축 완료

- 유사도 계산 알고리즘 구현
- 다중 셀렉터 폴백 로직
- 보고서 생성 자동화
- 3가지 재현성 차원 정의 완료

### ⚠️ 자동화 한계

**자동화가 어려운 이유:**
- 각 AI 서비스의 DOM 구조가 자주 변경됨
- SPA 렌더링 타이밍을 예측하기 어려움
- 입력/응답 요소의 동적 교체 패턴이 서비스마다 다름

## 4. 대안 평가 방법

### 옵션 1: 수동 평가 (정확성 최우선)

**방법:**
1. 각 AI 서비스에 직접 접속
2. 동일 프롬프트 3회 입력
3. 응답을 복사하여 JSON 파일로 저장
4. 분석 스크립트로 유사도 계산

**장점:**
- 100% 정확한 응답 캡처
- DOM 구조 변경 영향 없음
- 현재 기술로 즉시 실행 가능

**단점:**
- 수동 작업 필요 (약 30분 소요)

### 옵션 2: API 키 방식 전환

**방법:**
- 각 AI 서비스의 API 키 사용
- 프로그래매틱하게 응답 수집

**장점:**
- 안정적인 응답 수집
- 자동화 가능

**단점:**
- API 키 비용 발생
- 웹 서비스와 응답이 다를 수 있음 (Temperature 등 설정 차이)
- 현재 Playwright 아키텍처와 다른 접근

### 옵션 3: Playwright 셀레니움 강화

**방법:**
- 더 강력한 대기 조건 추가
- 사용자 정의 wait 함수 구현
- 실제 브라우저로 디버깅 후 셀렉터 수정

**장점:**
- 현재 아키텍처 유지
- 자동화 가능

**단점:**
- 시간 소요 (셀렉터 디버깅)
- DOM 변경 시 지속적인 유지보수 필요

## 5. 권장 사항

### 단기: 수동 평가 진행

**이유:**
- 현재 기술로 즉시 가능
- 정확한 결과 보장
- 재현성 평가의 목적 달성

**절차:**
1. Claude, Gemini, Perplexity 각 3회 접속
2. 동일 프롬프트 입력: "AI 기반 스마트폰 관리 시스템에 대한 창의적인 아이디어 2개를 제안해주세요. 각 아이디어는 1-2문장으로 설명해주세요. 답변은 한국어로 작성해주세요."
3. 응답을 복사하여 `docs/ai-reproducibility-results/manual/` 폴더에 JSON으로 저장
4. 분석 스크립트 실행

### 중기: Playwright 안정화

**개선 방향:**
- Custom Wait 함수: 특정 텍스트/요소가 나타날 때까지 대기
- 셀렉터 추상화 계층: 각 AI별 셀렉터를 별도 파일로 관리
- Health Check: 실행 전에 각 셀렉터 유효성 확인
- Fallback 전략: 여러 캡처 방법 순차적 시도

### 장기: API 하이브리드

**구조:**
- 웹 세션: 로그인 유지
- API 호출: 실제 응답 수집
- 비교 평가: 웹 vs API 응답 차이 분석

## 6. 현재 완료된 항목

### ✅ 템플릿 일관성 평가 (100%)

- 12개 템플릿 10회 반복 테스트
- 평균 일관성: 100%
- 길이 편차: 0.000
- Jinja2 결정론적 특성 검증 완료

### ✅ 프레임워크 구축

- AI 응답 재현성 정의 (3가지 차원)
- 유사도 계산 알고리즘
- 보고서 생성 템플릿
- Playwright 기반 테스트 인프라

### ⚠️ 실제 AI 응답 재현성 (진행 중)

- 세션 유효성: ✅ 확인
- 응답 캡처: ⚠️ 기술적 한계로 자동화 미완료
- 다음 단계: 수동 평가 또는 Playwright 안정화

## 7. 결론

**현재 상황:**
- 템플릿 프롬프트 생성의 일관성은 100% 검증 완료
- 실제 AI 응답 재현성 평가는 기술적 한계로 자동화 미완료

**권장:**
- 수동 평가를 통해 우선 재현성 데이터 확보
- Playwright 안정화 작업 병행하여 자동화 개선

---

*보고서 생성일: 2026-02-15 18:10*
*상태: 기술적 한계 분석 완료, 대안 수립 중*
